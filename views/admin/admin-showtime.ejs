<%- include ('../layouts/header')%>
    <% function convertDate(date){%>
        <% var newDate=new Date(date);%>
            <% return newDate.toLocaleDateString('en-GB');%>
                <%} %>

                    <body>
                        <%- include ('../layouts/admin-sub-header')%>
                            <div class="wrapper-index">
                                <div class="ad-movie">
                                    <div style="display: flex;
                                    justify-content: space-between;
                                    align-items: center;">
                                        <div class="h5-detail">Quản lý suất chiếu</div>
                                        <button type="button" id="btnAddShowTime" class="btn-common btn1"
                                            data-toggle="modal" data-target=".bd-example-modal-lg"><i class="fa fa-plus"
                                                aria-hidden="true"></i>
                                            Thêm mới</button>
                                    </div>
                                    <!-- Add suất chiếu -->
                                    <form class="formAdd" action="" method="">
                                        <div id="modalAddShowTime" class="modal">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h4 class="modal-title">Thêm suất chiếu</h4>
                                                    <button type="button" class="close-showTime close"
                                                        data-dismiss="modal">&times;</button>
                                                </div>
                                                <div class="modal-body-plus">
                                                    <div class="wrapModal">
                                                        <div class="rowShowTime">
                                                            <label style="width: 150px;" for="">Chọn phim</label>
                                                            <div class="rowST">
                                                                <select name="idAndTime" id="phim" class="form-select">
                                                                    Chọn phim
                                                                    <%films.forEach(function(film){%>
                                                                        <option value="<%=film._id%>/<%=film.time%>">
                                                                            <%=film.nameEN%>
                                                                        </option>
                                                                        <%})%>
                                                                </select>
                                                                <span class="span-error"></span>
                                                            </div>
                                                        </div>
                                                        <div class="rowShowTime">
                                                            <div class="rowST">
                                                                <label style="width: 150px;" for="">Ngày chiếu</label>
                                                                <div class="form-user">
                                                                    <input name="date" id="date"
                                                                        class="date-lc dateAdd form-select"
                                                                        style="background-image: none;" type="date"
                                                                        style="width:100%">
                                                                    <span class="span-error-add"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div id="form-addSC">
                                                            <div class="row first-row-addSc lc-suatchieu">
                                                                <div class="col-5 showTimeComponent">
                                                                    <label for="">Suất chiếu</label>
                                                                    <input type="time" name="timeStart" id="">
                                                                </div>
                                                                <div class="col-5 showTimeComponent">
                                                                    <label for="">Rạp</label>
                                                                    <select id="room" name="room" class="form-select">
                                                                        <option value="1">CINEMA 1</option>
                                                                        <option value="2">CINEMA 2</option>
                                                                        <option value="3">CINEMA 3</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <button class="btn-SC" id="btnAddSC" type="button">Thêm suất
                                                            chiếu</button>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <p class="alertAdd" style="color: red;"></p>
                                                    <button type="button"
                                                        class="btn btn-secondary close-showTime">Đóng</button>
                                                    <button type="button" class="btn-common btn-saveAdd">Thêm</button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>

                                    <span class="line-detail"></span>
                                    <table class="table table-striped  table-bordered" style="font-size: 15px;">
                                        <thead>
                                            <tr>
                                                <form action="">
                                                    <div class="ad-phim1"
                                                        style="justify-content: space-between; margin-top: 20px; align-items: flex-start;">
                                                        <select name="" class="form-select filmSelect"
                                                            style="width: 50%;">
                                                            <option value=""> Tất cả phim </option>
                                                            <%films.forEach(function(film){%>
                                                                <option value="<%=film._id%>">
                                                                    <%=film.nameEN%>
                                                                </option>
                                                                <%})%>

                                                        </select>
                                                </form>
                                                <form class="formSearch" action="" method="POST">
                                                    <div class="label-date" style=" align-items: flex-start;">
                                                        <label class="labeltime">Từ</label>
                                                        <div class="input-date">
                                                            <input type="hidden" name="nameEN" value="" id="">
                                                            <input style="background-image: none;"
                                                                class="date-lc1 form-select" name="datefrom"
                                                                type="datetime-local" value="">
                                                            <span class="span-error" id="timefrom_error"></span>
                                                        </div>
                                                        <label class="labeltime">Đến</label>
                                                        <div class="input-date">
                                                            <input style="background-image: none;"
                                                                class="date-lc1 form-select" name="dateto"
                                                                type="datetime-local" value="">

                                                            <span class="span-error" id="timeto_error">

                                                        </div>
                                                        <button class="submitsearch btn btn-buy btnSearchTime" type="submit" >Tìm kiếm</button>

                                                    </div>
                                                </form>
                                </div>
                                </tr>
                                <tr>
                                    <th scope="col" style="width: 50px; align-items: center;">
                                        <input class="form-check-input-del" type="checkbox" value="" id="checkAll">

                                    </th>
                                    <th scope="col">STT</th>
                                    <th scope="col" style="width: 10%;">Mã suất chiếu</th>
                                    <th scope="col">Tên phim</th>
                                    <th scope="col">Ngày chiếu</th>
                                    <th scope="col">Giờ chiếu</th>
                                    <th scope="col">Phòng chiếu</th>
                                    <th scope="col">Tình trạng</th>
                                    <th scope="col" style="width: 1%;">
                                        <div class="btn-admin">
                                            <button type="button" class="btn btn-danger delete-all"
                                                disabled>Xóa</button>


                                        </div>
                                    </th>
                                </tr>
                                </thead>
                                <tbody id="containTr">
                                    <form class="formDeleteAll" action="" method="post">
                                        <%var i=1;%>
                                            <%showtimes.forEach(function(showtime){%>
                                                <tr class="trClosest">
                                                    <td>
                                                        <input class="form-check-input-del itemcheck" name="checkall"
                                                            type="checkbox" value="">
                                                    </td>
                                                    <th style=" width: 20px;">
                                                        <%=i%>
                                                            <%i++;%>
                                                    </th>
                                                    <th scope="row">
                                                        <%=showtime.shortId%>
                                                    </th>
                                                    <td class="tdName" style="width: 20%;">
                                                        <div>
                                                            <%=showtime.nameEN%>
                                                        </div>
                                                    </td>
                                                    <td class="tdDate">
                                                        <%=convertDate(showtime.date)%>
                                                    </td>
                                                    <td class="tdTime">
                                                        <%=showtime.timeStart%> - <%=showtime.timeEnd%>
                                                    </td>
                                                    <td class="tdRoom">
                                                        CINEMA <%=showtime.room%>
                                                    </td>
                                                    <td>
                                                        <div class="form-check form-switch" style="padding-left: 2.5rem;">
                                                            <input class="swclosed form-check-input" id=""
                                                                type="checkbox" role="switch" />

                                                            <label class="form-check-label"
                                                                for="flexSwitchCheckChecked"></label>
                                                        </div>
                                                    </td>

                                                    <td>
                                                        <div class="ad-btn" style="    width: 60px;">

                                                            <a class="confirmDeletion" href=""><button type="button"
                                                                    id="" class="btnDelete btn-close btn-xoa"
                                                                    aria-label="Close"
                                                                    style="margin-top: 30px;"></button></a>
                                                            <button type="button" class="btn btn-danger btn-buy editBtn"
                                                                id="" style="width:100%; margin-top: 20px">Sửa</button>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <%})%>

                                    </form>
                                </tbody>
                                </thead>
                                <!-- Edit Suất chiếu -->
                                <div id="myModal" class="modal">
                                    <div class="modal-content" style="width: 40%; font-size: 16px;">
                                        <div class="modal-header">
                                            <h4 class="modal-title">Sửa lịch chiếu</h4>
                                            <button type="button" class="closeBtn" data-dismiss="modal">&times;</button>
                                        </div>
                                        <form class="formEdit" action="">
                                            <div class="modal-body">
                                                <div class="ad-phim1">
                                                    <label class="label-chitiet" for="">Tên phim</label>
                                                    <label for="">
                                                        <div class="nameEN" style="width:400px;">THE DEVIL MADE ME DO IT
                                                        </div>
                                                    </label>
                                                </div>

                                                <div class="ad-phim1">
                                                    <label class="label-chitiet" for="">Ngày chiếu</label>
                                                    <input name="date" class="date date-lc1" type="date"
                                                        style="    font-size: 18px;">
                                                    <span class="span-error-edit"></span>
                                                </div>
                                                <div class="ad-phim1">
                                                    <label class="label-chitiet " for="">Suất chiếu</label>
                                                    <div class="lc-suatchieu">
                                                        <div class="form-group"
                                                            style="margin-bottom: 0px; margin-left: 15px;">
                                                            <select name="time" class="time form-select"
                                                                style="width:400px">
                                                                <option value="09:00">09:00 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="13:00">13:00 PM</option>
                                                                <option value="15:00">15:00 PM</option>
                                                                <option value="17:00">17:00 PM</option>
                                                                <option value="19:00">19:00 PM</option>
                                                                <option value="21:00">21:00 PM</option>
                                                                <option value="23:00">23:00 PM</option>
                                                            </select>
                                                            <span class="span-error" id="birth_error"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="ad-phim1">
                                                    <label class="label-chitiet" for="">Phòng chiếu</label>
                                                    <div class="lc-suatchieu">
                                                        <div class="form-group" style="    margin-left: 15px;">
                                                            <select name="room" class="form-select room"
                                                                style="width:400px">
                                                                <option value="1">CINEMA 1</option>
                                                                <option value="2">CINEMA 2 </option>
                                                                <option value="3">CINEMA 3</option>
                                                            </select>
                                                            <span class="span-error" id="birth_error"></span>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>


                                            <div class="modal-footer">
                                                <p style="color: red;" class="alertEdit"></p>
                                                <button type="button" id="btn-save-change-item"
                                                    class="btn btn-danger">Sửa</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                </table>

                            </div>
                            <script src="../js/bootstrap.min.js"></script>
                            <script src="/js/admin-showtime.js"></script>
                    </body>

                    </html>